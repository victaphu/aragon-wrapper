{"version":3,"sources":["../../../src/rpc/handlers/past-events.js"],"names":["request","proxy","wrapper","params","length","eventNames","eventOptions","pastEvents","fromBlock","toBlock"],"mappings":";;;;;;;AAAA;;AAEe,kBAAUA,OAAV,EAAmBC,KAAnB,EAA0BC,OAA1B,EAAmC;AAChD;AACA;AACA;AACA,MAAIF,OAAO,CAACG,MAAR,CAAeC,MAAf,KAA0B,CAA1B,IAA+B,OAAOJ,OAAO,CAACG,MAAR,CAAe,CAAf,CAAP,KAA6B,QAAhE,EAA0E;AACxE;AACA,UAAME,UAAU,GAAG,2BAAcL,OAAO,CAACG,MAAR,CAAe,CAAf,CAAd,CAAnB;AACA,UAAMG,YAAY,GAAGN,OAAO,CAACG,MAAR,CAAe,CAAf,CAArB;AACA,WAAOF,KAAK,CAACM,UAAN,CAAiBF,UAAjB,EAA6BC,YAA7B,CAAP;AACD,GALD,MAKO,IAAIN,OAAO,CAACG,MAAR,CAAeC,MAAf,IAAyB,CAA7B,EAAgC;AACrC;AACA,UAAMI,SAAS,GAAGR,OAAO,CAACG,MAAR,CAAe,CAAf,CAAlB;AACA,UAAMM,OAAO,GAAGT,OAAO,CAACG,MAAR,CAAe,CAAf,CAAhB;AACA,WAAOF,KAAK,CAACM,UAAN,CAAiB,IAAjB,EAAuB;AAAEC,MAAAA,SAAF;AAAaC,MAAAA;AAAb,KAAvB,CAAP;AACD,GAd+C,CAgBhD;;;AACA,SAAOR,KAAK,CAACM,UAAN,EAAP;AACD","sourcesContent":["import { getEventNames } from '../../utils/events'\n\nexport default function (request, proxy, wrapper) {\n  // `past_events` RPC compatibility with aragonAPI versions:\n  //   - aragonAPIv2: `'past_events', [eventNames, eventOptions]`\n  //   - aragonAPIv1: `'past_events', [fromBlock (optional), toBlock (optional)]`\n  if (request.params.length === 2 && typeof request.params[1] === 'object') {\n    // aragonAPIv2\n    const eventNames = getEventNames(request.params[0])\n    const eventOptions = request.params[1]\n    return proxy.pastEvents(eventNames, eventOptions)\n  } else if (request.params.length <= 2) {\n    // aragonAPIv1\n    const fromBlock = request.params[0]\n    const toBlock = request.params[1]\n    return proxy.pastEvents(null, { fromBlock, toBlock })\n  }\n\n  // Otherwise, just use pastEvent defaults\n  return proxy.pastEvents()\n}\n"],"file":"past-events.js"}