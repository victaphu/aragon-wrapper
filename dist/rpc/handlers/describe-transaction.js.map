{"version":3,"sources":["../../../src/rpc/handlers/describe-transaction.js"],"names":["request","proxy","wrapper","transaction","params","to","Error","data","description","decoratedTransaction","_","processed","annotatedDescription"],"mappings":";;;;;;;AAAA;;AAEe,wBAAgBA,OAAhB,EAAyBC,KAAzB,EAAgCC,OAAhC,EAAyC;AACtD,QAAM,CAACC,WAAW,GAAG,EAAf,IAAqBH,OAAO,CAACI,MAAnC;;AACA,MAAI,CAACD,WAAW,CAACE,EAAjB,EAAqB;AACnB,UAAM,IAAIC,KAAJ,CAAW,8CAAX,CAAN;AACD;;AACD,MAAI,CAACH,WAAW,CAACI,IAAjB,EAAuB;AACrB,UAAM,IAAID,KAAJ,CAAW,gDAAX,CAAN;AACD;;AAED,MAAIE,WAAJ;;AACA,MAAI;AACF,UAAMC,oBAAoB,GAAG,MAAM,mCAAqBN,WAArB,EAAkCD,OAAlC,CAAnC;AACAM,IAAAA,WAAW,GAAGC,oBAAoB,CAACD,WAAnC;AACD,GAHD,CAGE,OAAOE,CAAP,EAAU,CAAE;;AAEd,MAAIF,WAAJ,EAAiB;AACf,QAAI;AACF,YAAMG,SAAS,GAAG,MAAM,4CAA8BH,WAA9B,EAA2CN,OAA3C,CAAxB;AACA,aAAO;AACLU,QAAAA,oBAAoB,EAAED,SAAS,CAACC,oBAD3B;AAELJ,QAAAA,WAAW,EAAEG,SAAS,CAACH;AAFlB,OAAP;AAID,KAND,CAME,OAAOE,CAAP,EAAU,CAAE;AACf;;AAED,SAAO;AACLF,IAAAA;AADK,GAAP;AAGD","sourcesContent":["import { postprocessRadspecDescription, tryEvaluatingRadspec } from '../../radspec'\n\nexport default async function (request, proxy, wrapper) {\n  const [transaction = {}] = request.params\n  if (!transaction.to) {\n    throw new Error(`Could not describe transaction: missing 'to'`)\n  }\n  if (!transaction.data) {\n    throw new Error(`Could not describe transaction: missing 'data'`)\n  }\n\n  let description\n  try {\n    const decoratedTransaction = await tryEvaluatingRadspec(transaction, wrapper)\n    description = decoratedTransaction.description\n  } catch (_) {}\n\n  if (description) {\n    try {\n      const processed = await postprocessRadspecDescription(description, wrapper)\n      return {\n        annotatedDescription: processed.annotatedDescription,\n        description: processed.description\n      }\n    } catch (_) {}\n  }\n\n  return {\n    description\n  }\n}\n"],"file":"describe-transaction.js"}